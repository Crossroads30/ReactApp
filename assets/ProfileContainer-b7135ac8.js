var g=Object.defineProperty;var f=(s,a,e)=>a in s?g(s,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[a]=e;var l=(s,a,e)=>(f(s,typeof a!="symbol"?a+"":a,e),e);import{j as t,r as v,F as P,b as N,d as S,m as b,R as m,c as _,g as M,h as d,P as k,i as w,u as C,k as I,e as E,l as W,n as y,o as F}from"./index-460e87c9.js";const U="_post_77i2e_1",T="_avatar_77i2e_7",A="_text_77i2e_15",p={post:U,avatar:T,text:A},D=s=>t.jsxs("div",{className:p.post,children:[t.jsx("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSQP7ARHenfnGXcxCIhmDxObHocM8FPbjyaBg&usqp=CAU",alt:"avatar",className:p.avatar}),t.jsx("p",{className:p.text,children:s.text}),t.jsxs("span",{children:["Likes ",s.likes]})]}),L="_posts_1a2ef_1",R="_textWrapper_1a2ef_5",$="_newPost_1a2ef_9",h={posts:L,textWrapper:R,newPost:$},B=b(10),q=s=>t.jsx("form",{onSubmit:s.handleSubmit,children:t.jsxs("div",{className:h.textWrapper,children:[t.jsx(P,{component:N,typeofelement:"textarea",className:h.newPost,name:"newPostText",placeholder:"  enter your news...",validate:[S,B]}),t.jsx("button",{children:"send"})]})}),H=v({form:"posts"})(q),z=m.memo(s=>{const a=s.posts.map(o=>t.jsx(D,{text:o.message,likes:o.likes},o.id)),e=o=>{const r=o.newPostText;s.addPost(r)};return t.jsxs("div",{className:h.posts,children:[t.jsx(H,{onSubmit:e}),a]})}),G=s=>({posts:s.profilePage.posts,newPostText:s.profilePage.newPostText}),J=_(G,{addPost:M})(z),K="_user_1cnrh_1",O="_userImg_1cnrh_8",Q="_name_1cnrh_16",V="_contentImg_1cnrh_20",X="_contactsWrapper_1cnrh_26",Y="_contacts_1cnrh_26",Z="_contactWrapper_1cnrh_43",tt="_key_1cnrh_49",st="_value_1cnrh_53",et="_preloader_1cnrh_57",n={user:K,userImg:O,name:Q,contentImg:V,contactsWrapper:X,contacts:Y,contactWrapper:Z,key:tt,value:st,preloader:et},at="_status_114t3_1",i={status:at};class ht extends m.Component{constructor(){super(...arguments);l(this,"state",{editMode:!1,status:this.props.status});l(this,"activateEditMode",()=>{this.setState({editMode:!0})});l(this,"deactivateEditMode",()=>{this.setState({editMode:!1}),this.props.updateStatus(this.state.status)});l(this,"onStatusChange",e=>{this.setState({status:e.currentTarget.value})})}componentDidUpdate(e,o){e.status!==this.props.status&&this.setState({status:this.props.status})}render(){return t.jsxs("div",{className:i.status,children:[!this.state.editMode&&t.jsx("div",{className:i.statusText,children:t.jsx("p",{onDoubleClick:this.activateEditMode,children:this.props.status||"No status"})}),this.state.editMode&&t.jsx("div",{className:i.input,children:t.jsx("input",{autoFocus:!0,defaultValue:this.state.status,onKeyDown:e=>{e.key==="Enter"&&(this.setState({editMode:!1}),this.props.updateStatus(this.state.status))},onBlur:this.deactivateEditMode,onChange:this.onStatusChange})})]})}}const ot=s=>{let[a,e]=d.useState(!1),[o,r]=d.useState(s.status);d.useEffect(()=>{r(s.status)},[s.status]);const c=()=>{e(!0)},x=()=>{e(!1),s.updateStatus(o)},j=u=>{r(u.currentTarget.value)};return t.jsxs("div",{className:i.status,children:[!a&&t.jsx("div",{className:i.statusText,children:t.jsx("p",{onDoubleClick:c,children:s.status||"No status"})}),a&&t.jsx("div",{className:i.input,children:t.jsx("input",{autoFocus:!0,value:o,onKeyDown:u=>{u.key==="Enter"&&x()},onBlur:x,onChange:j})})]})},nt=({userProfile:s,status:a,updateStatus:e})=>s?t.jsx(t.Fragment,{children:t.jsxs("div",{className:n.user,children:[t.jsx("img",{className:n.userImg,src:s.photos.small!==null?s.photos.small:w,alt:"user-profile"}),t.jsxs("div",{className:n.userInfo,children:[t.jsx("p",{className:n.name,children:s.fullName.charAt(0).toUpperCase()+s.fullName.slice(1)}),t.jsx(ot,{status:a,updateStatus:e}),t.jsx("div",{className:n.contactsWrapper,children:t.jsx("ul",{className:n.contacts,children:Object.entries(s.contacts).map(([o,r])=>t.jsx("li",{children:t.jsxs("div",{className:n.contactWrapper,children:[t.jsxs("p",{className:n.key,children:[o,":"]}),t.jsx("p",{className:n.value,children:r})]})},r+o))})}),t.jsx("p",{className:n.jobLooking,children:s.lookingForAJob}),t.jsx("p",{className:n.jobLookingDes,children:s.lookingForAJobDescription}),t.jsxs("p",{className:n.aboutMe,children:["About Me: ",s.aboutMe]})]})]})}):t.jsx("div",{className:n.preloader,children:t.jsx(k,{})}),rt={},ct=({userProfile:s,status:a,updateStatus:e})=>t.jsxs("main",{className:rt.content,children:[t.jsx(nt,{userProfile:s,status:a,updateStatus:e}),t.jsx(J,{})]}),it=s=>a=>{const e={location:C()},o={params:I()};return t.jsx(s,{...a,match:o,location:e})};class lt extends m.Component{componentDidMount(){const{match:a,authorizedUserId:e,getUserProfile:o,getStatus:r}=this.props;let c=a.params.userId;c||(c=e,c||(window.location.href="login")),o(c),r(c)}render(){return t.jsx(ct,{...this.props,userProfile:this.props.userProfile,status:this.props.status,updateStatus:this.props.updateStatus,mainUserId:this.props.mainUserId})}}const ut=s=>({userProfile:s.profilePage.userProfile,status:s.profilePage.status,authorizedUserId:s.auth.id,isAuth:s.auth.isAuth}),mt=E(_(ut,{getUserProfile:W,getStatus:y,updateStatus:F}),it)(lt);export{mt as default};
